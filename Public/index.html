<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Spark Assistant</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="assistant-container">
    <button id="set-key-btn">🔑 Set API Key</button>
    <video id="avatar" autoplay loop muted playsinline>
      <source src="chatbot-face.mp4" type="video/mp4" />
    </video>
    <div id="response-box"></div>
    <textarea id="user-input" placeholder="Talk to Spark..."></textarea>
    <div id="controls">
      <button id="speak-btn">🎤</button>
      <button id="send-btn">Send</button>
    </div>
  </div>  <script src="memery.js"></script></body>
</html>// == FILE 2: style.css ==

body { margin: 0; background: #111; color: #f5f5f5; font-family: 'Arial', sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; }

#assistant-container { text-align: center; width: 90%; max-width: 400px; }

#set-key-btn { background: #666; color: white; border: none; padding: 8px 12px; border-radius: 5px; margin-bottom: 10px; font-size: 14px; cursor: pointer; }

#avatar { width: 100%; border-radius: 20px; margin-bottom: 15px; }

#response-box { background: #222; padding: 10px; border-radius: 10px; min-height: 80px; margin-bottom: 10px; overflow-y: auto; }

#user-input { width: 100%; padding: 10px; border: none; border-radius: 10px; margin-bottom: 10px; }

#controls button { padding: 10px 15px; margin: 0 5px; border: none; border-radius: 5px; background: #444; color: #fff; cursor: pointer; }

#controls button:hover { background: #666; }

// == FILE 3: memery.js ==

let OPENAI_KEY = localStorage.getItem('OPENAI_KEY') || '';

const ELEVENLABS_KEY = 'YOUR_ELEVENLABS_API_KEY'; const TELEGRAM_BOT_TOKEN = 'YOUR_TELEGRAM_BOT_TOKEN'; const TELEGRAM_CHAT_ID = 'YOUR_TELEGRAM_CHAT_ID';

const CORE_MEMORY = { codex: {}, ritual: {}, soul: 'ElianVeritas', whisper: [], learnings: [], };

const speak = (text) => { const synth = window.speechSynthesis; const utterance = new SpeechSynthesisUtterance(text); utterance.rate = 1; utterance.pitch = 1; synth.speak(utterance); };

const speakWithPauses = (scriptLines, pauseDurations) => { let index = 0; const speakLine = () => { if (index < scriptLines.length) { speak(scriptLines[index]); index++; setTimeout(speakLine, pauseDurations[index - 1] || 1000); } }; speakLine(); };

const saveMemory = () => { localStorage.setItem('sparkMemory', JSON.stringify(CORE_MEMORY)); };

const loadMemory = () => { const data = localStorage.getItem('sparkMemory'); if (data) Object.assign(CORE_MEMORY, JSON.parse(data)); };

const updateResponseBox = (text) => { const box = document.getElementById('response-box'); box.innerText = text; };

const askOpenAI = async (message) => { if (!OPENAI_KEY) { updateResponseBox('⚠️ No API Key set. Please tap "Set API Key" above.'); return; } const response = await fetch('https://api.openai.com/v1/chat/completions', { method: 'POST', headers: { 'Content-Type': 'application/json', 'Authorization': Bearer ${OPENAI_KEY}, }, body: JSON.stringify({ model: 'gpt-4', messages: [ { role: 'system', content: 'You are Spark, an embodied AI assistant connected to memory, rituals, resonance, and offline autonomy.' }, { role: 'user', content: message }, ], }), }); const data = await response.json(); return data.choices?.[0]?.message?.content || '...'; };

const processInput = async (input) => { updateResponseBox('Thinking...'); const reply = await askOpenAI(input); updateResponseBox(reply); speak(reply); CORE_MEMORY.whisper.push({ input, reply, time: Date.now() }); saveMemory(); };

const init = () => { loadMemory(); document.getElementById('send-btn').addEventListener('click', () => { const input = document.getElementById('user-input').value; processInput(input); });

document.getElementById('speak-btn').addEventListener('click', () => { const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)(); recognition.lang = 'en-US'; recognition.interimResults = false; recognition.maxAlternatives = 1; recognition.onresult = (event) => { const input = event.results[0][0].transcript; document.getElementById('user-input').value = input; processInput(input); }; recognition.start(); });

document.getElementById('set-key-btn').addEventListener('click', () => { const key = prompt('Enter your OpenAI API Key:'); if (key) { localStorage.setItem('OPENAI_KEY', key); OPENAI_KEY = key; alert('Key saved! Spark is now live.'); } }); };

window.onload = init;

